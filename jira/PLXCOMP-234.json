{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"150763","self":"http://jira.codehaus.org/rest/api/latest/issue/150763","key":"PLXCOMP-234","fields":{"progress":{"progress":0,"total":0},"summary":"plexus archiver TarOptions setDirMode and setMode do not do anything unless TarArchiver.setOptions is called","timetracking":{},"issuetype":{"self":"http://jira.codehaus.org/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"http://jira.codehaus.org/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"customfield_10110":{"self":"http://jira.codehaus.org/rest/api/2/customFieldOption/10040","value":"yes","id":"10040"},"votes":{"self":"http://jira.codehaus.org/rest/api/2/issue/PLXCOMP-234/votes","votes":0,"hasVoted":false},"resolution":{"self":"http://jira.codehaus.org/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"fixVersions":[{"self":"http://jira.codehaus.org/rest/api/2/version/20669","id":"20669","name":"plexus-archiver-2.6.4","archived":false,"released":true,"releaseDate":"2014-10-09"}],"resolutiondate":"2014-10-09T10:20:13.503-0500","customfield_10210":"1.0","timespent":null,"reporter":{"self":"http://jira.codehaus.org/rest/api/2/user?username=jmh","name":"jmh","emailAddress":"james.henderson@rbc.com","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"James Henderson","active":true},"aggregatetimeoriginalestimate":null,"customfield_10161":["jmh(jmh)","krosenvold(krosenvold)"],"customfield_10160":null,"updated":"2014-10-09T10:20:13.580-0500","created":"2013-12-15T15:13:56.984-0600","description":"After modifying some unit tests to work on PLXCOMP-233 I noticed that the deprecated functions in TarOptions:\r\n\r\nSetDirMode\r\nSetMode\r\n\r\nDo not actually have any effect on the archive at all.\r\n\r\nThis is because TarArchiver uses ArchiveEntry to determine file/dir mode info and ArchiveEntry uses the default mode as well as any set mode to determine mode.  It doesn't know anything about TarOptions (as right it shouldn't).\r\n\r\nSince these functions have been deprecated since 2005 I suggest simply removing them.\r\n\r\nI have included a patch that will separately test setting the mode info directly with archiver.Set\\{File,Directory}Mode and setting it via archiver.getOptions.set\\{,Dir}Mode.  The TarOptions version fails and the failure indicates that the default modes are being prioritized above the set modes via TarOptions.","priority":{"self":"http://jira.codehaus.org/rest/api/2/priority/4","iconUrl":"http://jira.codehaus.org/images/icons/priorities/minor.png","name":"Minor","id":"4"},"duedate":null,"issuelinks":[],"customfield_10163":"8467200","watches":{"self":"http://jira.codehaus.org/rest/api/2/issue/PLXCOMP-234/watchers","watchCount":2,"isWatching":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"subtasks":[],"status":{"self":"http://jira.codehaus.org/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"http://jira.codehaus.org/images/icons/statuses/closed.png","name":"Closed","id":"6"},"customfield_10090":null,"labels":[],"workratio":-1,"assignee":{"self":"http://jira.codehaus.org/rest/api/2/user?username=krosenvold","name":"krosenvold","emailAddress":"krosenvold@apache.org","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&ownerId=krosenvold&avatarId=11127","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&ownerId=krosenvold&avatarId=11127","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&ownerId=krosenvold&avatarId=11127","48x48":"http://jira.codehaus.org/secure/useravatar?ownerId=krosenvold&avatarId=11127"},"displayName":"Kristian Rosenvold","active":true},"attachment":[{"self":"http://jira.codehaus.org/rest/api/2/attachment/64698","id":"64698","filename":"TarOptionsDeprecatedFunctionTest.patch","author":{"self":"http://jira.codehaus.org/rest/api/2/user?username=jmh","name":"jmh","emailAddress":"james.henderson@rbc.com","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"James Henderson","active":true},"created":"2013-12-15T15:13:57.001-0600","size":5037,"mimeType":"text/x-patch","content":"http://jira.codehaus.org/secure/attachment/64698/TarOptionsDeprecatedFunctionTest.patch"}],"customfield_10221":null,"customfield_10220":null,"customfield_10200":null,"aggregatetimeestimate":null,"customfield_10190":null,"project":{"self":"http://jira.codehaus.org/rest/api/2/project/11440","id":"11440","key":"PLXCOMP","name":"Plexus Components","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/projectavatar?size=xsmall&pid=11440&avatarId=10011","24x24":"http://jira.codehaus.org/secure/projectavatar?size=small&pid=11440&avatarId=10011","32x32":"http://jira.codehaus.org/secure/projectavatar?size=medium&pid=11440&avatarId=10011","48x48":"http://jira.codehaus.org/secure/projectavatar?pid=11440&avatarId=10011"},"projectCategory":{"self":"http://jira.codehaus.org/rest/api/2/projectCategory/10003","id":"10003","description":"various containers","name":"containers"}},"versions":[],"customfield_10170":null,"environment":null,"timeestimate":null,"customfield_10130":null,"aggregateprogress":{"progress":0,"total":0},"lastViewed":null,"components":[{"self":"http://jira.codehaus.org/rest/api/2/component/12540","id":"12540","name":"plexus-archiver"}],"comment":{"startAt":0,"maxResults":2,"total":2,"comments":[{"self":"http://jira.codehaus.org/rest/api/2/issue/150763/comment/337548","id":"337548","author":{"self":"http://jira.codehaus.org/rest/api/2/user?username=jmh","name":"jmh","emailAddress":"james.henderson@rbc.com","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"James Henderson","active":true},"body":"I have also noticed that there is a workaround in TarArchiver.setOptions.  This workaround will set the default file/dir mode according to the values in options.  However if you set the options by getting the options object via TarArchiver.getOptions and calling set\\{,Dir}Mode on that object, then you will not see any effect despite the fact that it should be semantically the same thing.\r\n\r\nAll in all it seems easier/better just to remove the methods rather than adding more workarounds.","updateAuthor":{"self":"http://jira.codehaus.org/rest/api/2/user?username=jmh","name":"jmh","emailAddress":"james.henderson@rbc.com","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"James Henderson","active":true},"created":"2013-12-15T15:30:01.524-0600","updated":"2013-12-15T15:30:01.524-0600"},{"self":"http://jira.codehaus.org/rest/api/2/issue/150763/comment/354098","id":"354098","author":{"self":"http://jira.codehaus.org/rest/api/2/user?username=krosenvold","name":"krosenvold","emailAddress":"krosenvold@apache.org","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&ownerId=krosenvold&avatarId=11127","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&ownerId=krosenvold&avatarId=11127","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&ownerId=krosenvold&avatarId=11127","48x48":"http://jira.codehaus.org/secure/useravatar?ownerId=krosenvold&avatarId=11127"},"displayName":"Kristian Rosenvold","active":true},"body":"Fixed in 7ae0f5a701efb18302f900aaec2794b1ceef2cf5, thanks for the patch !","updateAuthor":{"self":"http://jira.codehaus.org/rest/api/2/user?username=krosenvold","name":"krosenvold","emailAddress":"krosenvold@apache.org","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&ownerId=krosenvold&avatarId=11127","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&ownerId=krosenvold&avatarId=11127","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&ownerId=krosenvold&avatarId=11127","48x48":"http://jira.codehaus.org/secure/useravatar?ownerId=krosenvold&avatarId=11127"},"displayName":"Kristian Rosenvold","active":true},"created":"2014-10-09T10:20:13.559-0500","updated":"2014-10-09T10:20:13.559-0500"}]},"timeoriginalestimate":null,"aggregatetimespent":null}}