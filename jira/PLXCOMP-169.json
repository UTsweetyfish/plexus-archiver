{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"119581","self":"http://jira.codehaus.org/rest/api/latest/issue/119581","key":"PLXCOMP-169","fields":{"progress":{"progress":0,"total":300,"percent":0},"summary":"IO & Archiver forget to raise filename in case of an error","timetracking":{"originalEstimate":"5m","remainingEstimate":"5m","originalEstimateSeconds":300,"remainingEstimateSeconds":300},"issuetype":{"self":"http://jira.codehaus.org/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"http://jira.codehaus.org/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false},"customfield_10110":null,"votes":{"self":"http://jira.codehaus.org/rest/api/2/issue/PLXCOMP-169/votes","votes":0,"hasVoted":false},"resolution":{"self":"http://jira.codehaus.org/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"fixVersions":[{"self":"http://jira.codehaus.org/rest/api/2/version/17455","id":"17455","description":"","name":"plexus-archiver-2.0","archived":false,"released":true,"releaseDate":"2011-06-27"}],"resolutiondate":"2011-04-02T12:06:12.130-0500","customfield_10210":"0.0","timespent":null,"reporter":{"self":"http://jira.codehaus.org/rest/api/2/user?username=thomas.belot","name":"thomas.belot","emailAddress":"thomas.belot@santeos.com","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"Thomas B","active":true},"aggregatetimeoriginalestimate":300,"customfield_10161":["hboutemy(hboutemy)","thomas.belot(thomas.belot)"],"customfield_10160":null,"updated":"2011-07-07T08:34:30.984-0500","created":"2010-12-23T07:35:11.624-0600","description":"When an exception is raised only the message is shown. \r\n\r\nIf the message doesn't carry the name of the file that causes the exception it can take a lot of time to find the issue.\r\nexample : \r\n Failed to execute goal org.apache.maven.plugins:maven-assembly-plugin:2.2:assembly (default-cli) on project test-jna-applet-dmp1: Failed to create assembly: Error creating assembly archive jar-with-dependencies: Problem creating jar: no entry name specified\r\n\r\ncaused by a file whose name was prefixed \".#\"\r\n\r\nPatch for plexus-io-1.0.1 \r\n{code:title=PlexusIoURLResource:28|borderStyle=solid}\r\npublic InputStream getContents() throws IOException\r\n{\r\n\ttry{\r\n\t\treturn getURL().openStream();\r\n\t}catch(IOException e){\r\n\t\tthrow new IOException(e.getMessage()+\" for \"+getURL());\r\n\t}\r\n}\r\n{code}\r\n\r\npatch for plexus-archiver-1.1:\r\n{code:title=AbstractZipArchiver:573|borderStyle=solid}\r\n/**\r\n* Method that gets called when adding from java.io.File instances.\r\n* <p/>\r\n* <p>This implementation delegates to the six-arg version.</p>\r\n*\r\n* @param entry the file to add to the archive\r\n* @param zOut  the stream to write to\r\n* @param vPath the name this entry shall have in the archive\r\n*/\r\nprotected void zipFile( ArchiveEntry entry, ZipOutputStream zOut, String vPath )\r\nthrows IOException, ArchiverException\r\n{\r\n\tif ( ResourceUtils.isSame( entry.getResource(), getDestFile() ) )\r\n\t{\r\n\t    throw new ArchiverException( \"A zip file cannot include itself\" );\r\n\t}\r\n\t\r\n\tInputStream fIn = null;\r\n\ttry\r\n\t{\r\n\t    fIn = entry.getInputStream();\r\n\t    // ZIPs store time with a granularity of 2 seconds, round up\r\n\t    final long lastModified = entry.getResource().getLastModified() + ( roundUp ? 1999 : 0 );\r\n\t    zipFile( fIn, zOut, vPath, lastModified, null, entry.getMode() );\r\n\t}\r\n\tcatch(IOException e)\r\n\t{\r\n\t    throw new ArchiverException(e.getMessage()+\" for \"+entry.getName(),e);\r\n\t}\r\n\tfinally\r\n\t{\r\n\t    fIn.close();\r\n\t}\r\n}\r\n{code}\r\n","priority":{"self":"http://jira.codehaus.org/rest/api/2/priority/2","iconUrl":"http://jira.codehaus.org/images/icons/priorities/critical.png","name":"Critical","id":"2"},"duedate":null,"issuelinks":[],"customfield_10163":"119491200","watches":{"self":"http://jira.codehaus.org/rest/api/2/issue/PLXCOMP-169/watchers","watchCount":0,"isWatching":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"subtasks":[],"status":{"self":"http://jira.codehaus.org/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"http://jira.codehaus.org/images/icons/statuses/closed.png","name":"Closed","id":"6"},"customfield_10090":null,"labels":[],"workratio":0,"assignee":{"self":"http://jira.codehaus.org/rest/api/2/user?username=hboutemy","name":"hboutemy","emailAddress":"herve.boutemy@free.fr","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10218","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10218","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10218","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10218"},"displayName":"Herve Boutemy","active":true},"attachment":[],"customfield_10221":null,"customfield_10220":null,"customfield_10200":null,"aggregatetimeestimate":300,"customfield_10190":null,"project":{"self":"http://jira.codehaus.org/rest/api/2/project/11440","id":"11440","key":"PLXCOMP","name":"Plexus Components","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/projectavatar?size=xsmall&pid=11440&avatarId=10011","24x24":"http://jira.codehaus.org/secure/projectavatar?size=small&pid=11440&avatarId=10011","32x32":"http://jira.codehaus.org/secure/projectavatar?size=medium&pid=11440&avatarId=10011","48x48":"http://jira.codehaus.org/secure/projectavatar?pid=11440&avatarId=10011"},"projectCategory":{"self":"http://jira.codehaus.org/rest/api/2/projectCategory/10003","id":"10003","description":"various containers","name":"containers"}},"versions":[],"customfield_10170":[{"self":"http://jira.codehaus.org/rest/api/2/customFieldOption/10070","value":"Yes","id":"10070"}],"environment":"any","timeestimate":300,"customfield_10130":null,"aggregateprogress":{"progress":0,"total":300,"percent":0},"lastViewed":null,"components":[{"self":"http://jira.codehaus.org/rest/api/2/component/12540","id":"12540","name":"plexus-archiver"},{"self":"http://jira.codehaus.org/rest/api/2/component/14319","id":"14319","name":"plexus-io"}],"comment":{"startAt":0,"maxResults":1,"total":1,"comments":[{"self":"http://jira.codehaus.org/rest/api/2/issue/119581/comment/262324","id":"262324","author":{"self":"http://jira.codehaus.org/rest/api/2/user?username=hboutemy","name":"hboutemy","emailAddress":"herve.boutemy@free.fr","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10218","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10218","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10218","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10218"},"displayName":"Herve Boutemy","active":true},"body":"patch applied on plexus-archiver\r\n\r\nI'm not ok for plexus-io: in this case, that's the caller that has to trace the FileInfo he's getting inputstream","updateAuthor":{"self":"http://jira.codehaus.org/rest/api/2/user?username=hboutemy","name":"hboutemy","emailAddress":"herve.boutemy@free.fr","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10218","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10218","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10218","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10218"},"displayName":"Herve Boutemy","active":true},"created":"2011-04-02T12:06:12.212-0500","updated":"2011-04-02T12:06:12.212-0500"}]},"timeoriginalestimate":300,"aggregatetimespent":null}}