{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"124555","self":"http://jira.codehaus.org/rest/api/latest/issue/124555","key":"PLXCOMP-174","fields":{"progress":{"progress":0,"total":7200,"percent":0},"summary":"exception in PlexusIoResourceAttributeUtils$AttributeParser.consumeLine if is a large number","timetracking":{"originalEstimate":"2h","remainingEstimate":"2h","originalEstimateSeconds":7200,"remainingEstimateSeconds":7200},"issuetype":{"self":"http://jira.codehaus.org/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"http://jira.codehaus.org/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"customfield_10110":null,"votes":{"self":"http://jira.codehaus.org/rest/api/2/issue/PLXCOMP-174/votes","votes":0,"hasVoted":false},"resolution":{"self":"http://jira.codehaus.org/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"fixVersions":[{"self":"http://jira.codehaus.org/rest/api/2/version/17456","id":"17456","description":"","name":"plexus-io-2.0","archived":false,"released":true,"releaseDate":"2011-06-27"}],"resolutiondate":"2011-06-24T17:14:05.462-0500","customfield_10210":"0.0","timespent":null,"reporter":{"self":"http://jira.codehaus.org/rest/api/2/user?username=vknajtner","name":"vknajtner","emailAddress":"vladimir.knajtner@jpmorgan.com","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"vladimir knajtner","active":true},"aggregatetimeoriginalestimate":7200,"customfield_10161":["jglick(jglick)","krosenvold(krosenvold)","vknajtner(vknajtner)"],"customfield_10160":null,"updated":"2011-07-07T08:37:10.165-0500","created":"2011-04-18T18:10:38.751-0500","description":"I get the following exception\r\n\r\n{noformat}java.lang.reflect.UndeclaredThrowableException\r\n        at org.codehaus.plexus.archiver.AbstractArchiver.getFiles(AbstractArchiver.java:519)\r\n        at org.apache.maven.plugin.source.AbstractSourceJarMojo.packageSources(AbstractSourceJarMojo.java:262)\r\n        at org.apache.maven.plugin.source.AbstractSourceJarMojo.packageSources(AbstractSourceJarMojo.java:232)\r\n        at org.apache.maven.plugin.source.AbstractSourceJarMojo.execute(AbstractSourceJarMojo.java:201)\r\n        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)\r\n        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)\r\n        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)\r\n        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)\r\n        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)\r\n        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)\r\n        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)\r\n        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)\r\n        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)\r\n        at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)\r\n        at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n        at java.lang.reflect.Method.invoke(Method.java:597)\r\n        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)\r\n        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)\r\n        at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)\r\n        at org.codehaus.classworlds.Launcher.main(Launcher.java:375)\r\nCaused by: org.codehaus.plexus.archiver.ArchiverException: Failed to retrieve numeric file attributes using: '/bin/sh -c ls -1nlaR /vobs/rio/apps/marrs_core_client/src'\r\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:427)\r\n        at org.codehaus.plexus.archiver.AbstractArchiver.getFiles(AbstractArchiver.java:507)\r\n        ... 22 more\r\nCaused by: java.io.IOException: Failed to retrieve numeric file attributes using: '/bin/sh -c ls -1nlaR /vobs/rio/apps/marrs_core_client/src'\r\n        at org.codehaus.plexus.components.io.attributes.PlexusIoResourceAttributeUtils.executeLs(PlexusIoResourceAttributeUtils.java:287)\r\n        at org.codehaus.plexus.components.io.attributes.PlexusIoResourceAttributeUtils.getFileAttributesByPath(PlexusIoResourceAttributeUtils.java:223)\r\n        at org.codehaus.plexus.components.io.attributes.PlexusIoResourceAttributeUtils.getFileAttributesByPath(PlexusIoResourceAttributeUtils.java:189)\r\n        at org.codehaus.plexus.components.io.resources.PlexusIoFileResourceCollection.getResources(PlexusIoFileResourceCollection.java:175)\r\n        at org.codehaus.plexus.archiver.AbstractArchiver$1.hasNext(AbstractArchiver.java:423)\r\n        ... 23 more\r\nCaused by: org.codehaus.plexus.util.cli.CommandLineException: Error inside systemOut parser\r\n        at org.codehaus.plexus.util.cli.CommandLineUtils.executeCommandLine(CommandLineUtils.java:222)\r\n        at org.codehaus.plexus.util.cli.CommandLineUtils.executeCommandLine(CommandLineUtils.java:107)\r\n        at org.codehaus.plexus.components.io.attributes.PlexusIoResourceAttributeUtils.executeLs(PlexusIoResourceAttributeUtils.java:277)\r\n        ... 27 more\r\nCaused by: java.lang.NumberFormatException: For input string: \"4294967294\"\r\n        at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)\r\n        at java.lang.Integer.parseInt(Integer.java:461)\r\n        at java.lang.Integer.parseInt(Integer.java:499)\r\n        at org.codehaus.plexus.components.io.attributes.PlexusIoResourceAttributeUtils$AttributeParser.consumeLine(PlexusIoResourceAttributeUtils.java:452)\r\n        at org.codehaus.plexus.util.cli.StreamPumper.consumeLine(StreamPumper.java:197)\r\n        at org.codehaus.plexus.util.cli.StreamPumper.run(StreamPumper.java:137){noformat}\r\n\r\n\r\nApparently, PlexusIoResourceAttributeUtils$AttributeParser.consumeLine() assumes that group ID can fit into an integer\r\n\r\n{code:java}                        if ( attributes != null )\r\n                        {\r\n                            if ( extractNames )\r\n                            {\r\n                                attributes.setUserName( parts[2] );\r\n                                attributes.setGroupName( parts[3] );\r\n                            }\r\n                            else\r\n                            {\r\n                                attributes.setUserId( Integer.parseInt( parts[2] ) );\r\n                                attributes.setGroupId( Integer.parseInt( parts[3] ) );\r\n                            }\r\n                        }{code}\r\n\r\nwhen on 64-bit linux this value is an unsigned int.\r\n\r\nFix for this will obviously affect public class FileAttributes and some of its clients that invoke getGroup() and setGroup().  Since this is a change that potentially has a large scope, I would prefer that you guys implement it and roll it in.\r\n","priority":{"self":"http://jira.codehaus.org/rest/api/2/priority/3","iconUrl":"http://jira.codehaus.org/images/icons/priorities/major.png","name":"Major","id":"3"},"duedate":null,"issuelinks":[{"id":"29232","self":"http://jira.codehaus.org/rest/api/2/issueLink/29232","type":{"id":"10001","name":"dependent","inward":"is depended upon by","outward":"depends upon","self":"http://jira.codehaus.org/rest/api/2/issueLinkType/10001"},"inwardIssue":{"id":"126870","key":"PLXCOMP-181","self":"http://jira.codehaus.org/rest/api/2/issue/126870","fields":{"summary":"Upgrade to latest versions of plexus-io and plexus-utils","status":{"self":"http://jira.codehaus.org/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"http://jira.codehaus.org/images/icons/statuses/closed.png","name":"Closed","id":"6"},"priority":{"self":"http://jira.codehaus.org/rest/api/2/priority/3","iconUrl":"http://jira.codehaus.org/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"http://jira.codehaus.org/rest/api/2/issuetype/3","id":"3","description":"A task that needs to be done.","iconUrl":"http://jira.codehaus.org/images/icons/issuetypes/task.png","name":"Task","subtask":false}}}}],"customfield_10163":"112320000","watches":{"self":"http://jira.codehaus.org/rest/api/2/issue/PLXCOMP-174/watchers","watchCount":1,"isWatching":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"subtasks":[],"status":{"self":"http://jira.codehaus.org/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"http://jira.codehaus.org/images/icons/statuses/closed.png","name":"Closed","id":"6"},"customfield_10090":null,"labels":[],"workratio":0,"assignee":{"self":"http://jira.codehaus.org/rest/api/2/user?username=krosenvold","name":"krosenvold","emailAddress":"krosenvold@apache.org","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&ownerId=krosenvold&avatarId=11127","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&ownerId=krosenvold&avatarId=11127","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&ownerId=krosenvold&avatarId=11127","48x48":"http://jira.codehaus.org/secure/useravatar?ownerId=krosenvold&avatarId=11127"},"displayName":"Kristian Rosenvold","active":true},"attachment":[],"customfield_10221":null,"customfield_10220":null,"customfield_10200":null,"aggregatetimeestimate":7200,"customfield_10190":null,"project":{"self":"http://jira.codehaus.org/rest/api/2/project/11440","id":"11440","key":"PLXCOMP","name":"Plexus Components","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/projectavatar?size=xsmall&pid=11440&avatarId=10011","24x24":"http://jira.codehaus.org/secure/projectavatar?size=small&pid=11440&avatarId=10011","32x32":"http://jira.codehaus.org/secure/projectavatar?size=medium&pid=11440&avatarId=10011","48x48":"http://jira.codehaus.org/secure/projectavatar?pid=11440&avatarId=10011"},"projectCategory":{"self":"http://jira.codehaus.org/rest/api/2/projectCategory/10003","id":"10003","description":"various containers","name":"containers"}},"versions":[{"self":"http://jira.codehaus.org/rest/api/2/version/17456","id":"17456","description":"","name":"plexus-io-2.0","archived":false,"released":true,"releaseDate":"2011-06-27"}],"customfield_10170":[{"self":"http://jira.codehaus.org/rest/api/2/customFieldOption/10070","value":"Yes","id":"10070"}],"environment":"uname -a\r\nLinux snjdevdex1 2.6.9-67.0.4.ELlargesmp #1 SMP Fri Jan 18 05:10:01 EST 2008 x86_64 x86_64 x86_64 GNU/Linux\r\n","timeestimate":7200,"customfield_10130":null,"aggregateprogress":{"progress":0,"total":7200,"percent":0},"lastViewed":null,"components":[{"self":"http://jira.codehaus.org/rest/api/2/component/14319","id":"14319","name":"plexus-io"}],"comment":{"startAt":0,"maxResults":4,"total":4,"comments":[{"self":"http://jira.codehaus.org/rest/api/2/issue/124555/comment/269753","id":"269753","author":{"self":"http://jira.codehaus.org/rest/api/2/user?username=krosenvold","name":"krosenvold","emailAddress":"krosenvold@apache.org","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&ownerId=krosenvold&avatarId=11127","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&ownerId=krosenvold&avatarId=11127","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&ownerId=krosenvold&avatarId=11127","48x48":"http://jira.codehaus.org/secure/useravatar?ownerId=krosenvold&avatarId=11127"},"displayName":"Kristian Rosenvold","active":true},"body":"I seem to run into this for NFS based group-ids/uids. It seems to have happened when I upgraded to 2.6.35-28-generic #50-Ubuntu x64\r\n\r\nAfter some discussion on the local linux irc channel we suspect this may be related to NFS4 clients, which can be identified by looking at cat /proc/mounts\r\n\r\n","updateAuthor":{"self":"http://jira.codehaus.org/rest/api/2/user?username=krosenvold","name":"krosenvold","emailAddress":"krosenvold@apache.org","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&ownerId=krosenvold&avatarId=11127","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&ownerId=krosenvold&avatarId=11127","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&ownerId=krosenvold&avatarId=11127","48x48":"http://jira.codehaus.org/secure/useravatar?ownerId=krosenvold&avatarId=11127"},"displayName":"Kristian Rosenvold","active":true},"created":"2011-06-07T14:35:30.130-0500","updated":"2011-06-07T14:49:11.429-0500"},{"self":"http://jira.codehaus.org/rest/api/2/issue/124555/comment/269807","id":"269807","author":{"self":"http://jira.codehaus.org/rest/api/2/user?username=jglick","name":"jglick","emailAddress":"typrase@gmail.com","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"Jesse Glick","active":true},"body":"Maybe I'm missing something, but would it not suffice to use {{Long}} only for the parsing?\r\n\r\n{noformat}\r\nattributes.setUserId( (int) Long.parseLong( parts[2] ) );\r\n{noformat}\r\n\r\nIn your example, this will set the field to {{-2}} which I suppose is what was wanted. {{FileAttributes.toString}} might need to be patched to check for \"negative\" values and use e.g. {{Long.toString( (long) userId + 0x100000000L )}}.\r\n\r\nLooks like {{PlexusIoResourceAttributeUtilsTest}} could cover everything.\r\n\r\nBy the way, {{sun.nio.fs.UnixUserPrincipals.User}} in JDK 7 is using an {{int}} field.","updateAuthor":{"self":"http://jira.codehaus.org/rest/api/2/user?username=jglick","name":"jglick","emailAddress":"typrase@gmail.com","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"Jesse Glick","active":true},"created":"2011-06-08T09:16:44.731-0500","updated":"2011-06-08T09:16:44.731-0500"},{"self":"http://jira.codehaus.org/rest/api/2/issue/124555/comment/269941","id":"269941","author":{"self":"http://jira.codehaus.org/rest/api/2/user?username=krosenvold","name":"krosenvold","emailAddress":"krosenvold@apache.org","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&ownerId=krosenvold&avatarId=11127","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&ownerId=krosenvold&avatarId=11127","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&ownerId=krosenvold&avatarId=11127","48x48":"http://jira.codehaus.org/secure/useravatar?ownerId=krosenvold&avatarId=11127"},"displayName":"Kristian Rosenvold","active":true},"body":"Thanks, that seems like a much simpler solution. I was over-complicating things a little.\r\n\r\nThere's still an interesting case where plexus-io uses -1 as the official value for \"not set\", which is exposed to its clients. Since -1 in this context is actually a legal value with this solution I'll check if there's any usage of this.\r\n\r\nIf it's good enough for the jdk it's probably good enough for us too.","updateAuthor":{"self":"http://jira.codehaus.org/rest/api/2/user?username=krosenvold","name":"krosenvold","emailAddress":"krosenvold@apache.org","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&ownerId=krosenvold&avatarId=11127","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&ownerId=krosenvold&avatarId=11127","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&ownerId=krosenvold&avatarId=11127","48x48":"http://jira.codehaus.org/secure/useravatar?ownerId=krosenvold&avatarId=11127"},"displayName":"Kristian Rosenvold","active":true},"created":"2011-06-09T16:31:58.451-0500","updated":"2011-06-09T16:31:58.451-0500"},{"self":"http://jira.codehaus.org/rest/api/2/issue/124555/comment/271299","id":"271299","author":{"self":"http://jira.codehaus.org/rest/api/2/user?username=krosenvold","name":"krosenvold","emailAddress":"krosenvold@apache.org","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&ownerId=krosenvold&avatarId=11127","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&ownerId=krosenvold&avatarId=11127","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&ownerId=krosenvold&avatarId=11127","48x48":"http://jira.codehaus.org/secure/useravatar?ownerId=krosenvold&avatarId=11127"},"displayName":"Kristian Rosenvold","active":true},"body":"Fixed in 6ed88f3d39bec3390c8c100ad6fc68b2d1bd81a6 with testcase updates","updateAuthor":{"self":"http://jira.codehaus.org/rest/api/2/user?username=krosenvold","name":"krosenvold","emailAddress":"krosenvold@apache.org","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&ownerId=krosenvold&avatarId=11127","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&ownerId=krosenvold&avatarId=11127","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&ownerId=krosenvold&avatarId=11127","48x48":"http://jira.codehaus.org/secure/useravatar?ownerId=krosenvold&avatarId=11127"},"displayName":"Kristian Rosenvold","active":true},"created":"2011-06-24T17:14:05.504-0500","updated":"2011-06-24T17:14:05.504-0500"}]},"timeoriginalestimate":7200,"aggregatetimespent":null}}